<style id="page-lock">
  body { display: none !important; }
</style>

<script>
(function() {
    var password = "123"; // 【请修改这里填你的密码】
    var storageKey = 'quarto-blog-auth';

    // 定义一个“开锁”函数：移除隐藏样式，把页面显示出来
    function unlockPage() {
        var lockStyle = document.getElementById('page-lock');
        if (lockStyle) {
            lockStyle.remove(); // 移除 CSS，页面恢复正常显示
        }
        document.body.style.display = ''; // 确保 Body 属性复原
    }

    // 逻辑开始
    var savedPassword = localStorage.getItem(storageKey);

    if (savedPassword === password) {
        // A. 如果本地已经存了正确密码 -> 直接开锁
        unlockPage();
    } else {
        // B. 如果没有密码 -> 弹窗询问
        // 注意：此时页面依然是 display: none (全白) 的状态
        var input = prompt("请输入访问密码:");

        if (input === password) {
            // 密码正确 -> 存下来，并开锁
            localStorage.setItem(storageKey, password);
            unlockPage();
        } else {
            // 密码错误 -> 弹窗提示
            alert("密码错误！即将离开页面。");
            
            // 【关键修改】不要 reload，而是直接跳走，或者就这样保持全白
            // 方案 A：跳转到空白页 (最安全)
            window.location.href = "about:blank"; 
            
            // 方案 B：或者你想让它一直白着也行，什么都不做，反正 CSS 还在生效
        }
    }
})();
</script>